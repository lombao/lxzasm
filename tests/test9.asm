# From Amstrad Semanal 53

	ORG #A000
	CALL #BCA7
	LD A,1
	LD (DURAC),A
	XOR A
	LD (RUIDO),A
	LD A,4
	LD (VOLUM),A
	LD B,7

BUC1:	PUSH BC
	CALL SONAR
	LD A,(VOLUM)
	INC A
	LD (VOLUM),A
	POP BC
	DJNZ BUC1
	XOR A
	LD (RUIDO),A
	LD A,7
	LD (VOLUM),A
	LD A,1
	LD (DURAC),A
	LD B,3

BUC2:	PUSH BC
	CALL SONAR
	LD A,(DURAC)
	INC A
	LD (DURAC),A
	POP BC
	DJNZ BUC2
	LD A,1
	LD (DURAC),A
	LD (RUIDO),A
	LD B,3
	
BUC3:	PUSH BC
	CALL SONAR
	LD A,(RUIDO)
	INC A
	LD (RUIDO),A
	POP BC
	DJNZ BUC3
	RET

SONAR: 	LD HL,0
	LD (NOTA),HL
	LD BC,550

BUC:	PUSH BC
	LD HL,(NOTA)
	INC HL
	LD (NOTA),HL
	CALL MUSIC
	POP BC
	DEC BC
	LD A,B
	OR C
	JR NZ,BUC
	RET

MUSIC:	LD A,1
	CALL #BCAD
	AND 7
	JR Z,MUSIC
	LD HL,DATOS
	CALL #BCAA
	RET

DATOS:	DEFB 1,0,0
NOTA:	DEFW 0
RUIDO:	DEFB 0
VOLUM:	DEFB 7
DURAC:	DEFW 1


